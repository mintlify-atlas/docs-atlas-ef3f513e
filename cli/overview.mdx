---
title: 'CLI Overview'
description: 'Overview of the Broccoli CLI tool and how it works'
icon: 'terminal'
---

## What is Broccoli?

Broccoli is a command-line tool that uses brotli compression to embed a virtual file system in Go executables. It allows you to bundle static assets, web files, or any other resources directly into your Go binary.

## How It Works

Broccoli works by:

1. **Reading** your source files and directories
2. **Compressing** them using brotli compression (levels 1-11)
3. **Generating** a `.gen.go` file with an embedded virtual file system
4. **Exposing** a Go variable that provides access to the embedded files

<Note>
Broccoli is typically used with `go:generate` directives to automate the embedding process during your build workflow.
</Note>

## Basic Usage

The most basic invocation of Broccoli:

```bash
broccoli -src public
```

This reads the `public` directory and generates a `public.gen.go` file with a variable named `br` containing the compressed file system.

## Common Use Cases

<CardGroup cols={2}>
  <Card title="Web Assets" icon="globe">
    Embed HTML, CSS, JavaScript, and images for web applications
  </Card>
  <Card title="Static Files" icon="file">
    Bundle configuration files, templates, or data files
  </Card>
  <Card title="WASM Files" icon="cube">
    Include WebAssembly modules in your binary
  </Card>
  <Card title="Resources" icon="folder">
    Package any static resources your application needs
  </Card>
</CardGroup>

## Integration with go:generate

Broccoli is designed to work seamlessly with Go's generate tool. Add a directive to your Go file:

```go
//go:generate broccoli -src assets -o broccoli -var broccoli
```

Then run:

```bash
go generate
```

<Tip>
Place your `//go:generate` directive in a file that's part of your main package to ensure it's easily discoverable.
</Tip>

## Generated Output

Broccoli generates a Go file with:

- A timestamp comment indicating when it was generated
- Optional build tags for conditional compilation
- A package declaration matching your current package
- An exported variable of type `fs.FS` containing your compressed files

### Example Output Structure

```go
// Code generated by broccoli at 2026-02-18T10:30:00Z.
package main

import "aletheia.icu/broccoli/fs"

var br = fs.New(false, []byte("...compressed data..."))
```

## Compression Levels

Broccoli uses brotli compression with configurable quality levels:

- **Level 1-3**: Fastest compression, larger file size
- **Level 4-6**: Balanced compression
- **Level 7-9**: Better compression, slower
- **Level 10-11**: Maximum compression (default: 11)

<Warning>
Higher compression levels take significantly longer but produce smaller binaries. Choose based on your build time vs binary size trade-off.
</Warning>

## File Selection

Broccoli provides flexible file selection through:

- **Multiple inputs**: Comma-separated files and directories
- **Include patterns**: Wildcard matching for files to include
- **Exclude patterns**: Wildcard matching for files to exclude
- **Gitignore support**: Automatic parsing of `.gitignore` files

## Next Steps

<CardGroup cols={2}>
  <Card title="Commands" icon="code" href="/cli/commands">
    Learn about command structure and usage patterns
  </Card>
  <Card title="Flags" icon="flag" href="/cli/flags">
    Explore all available CLI flags and options
  </Card>
</CardGroup>
