---
title: 'Flags'
description: 'Detailed documentation of all CLI flags with examples'
icon: 'flag'
---

## Available Flags

Broccoli provides the following command-line flags to customize file embedding:

<ParamField path="-src" type="string" default="public">
  The input files and directories to embed. Can be a single path or comma-separated list.

  **Examples:**
  ```bash
  broccoli -src public
  broccoli -src "public,assets,config.json"
  broccoli -src static/images
  ```

  <Note>
  When providing multiple paths, separate them with commas without spaces, or quote the entire argument.
  </Note>
</ParamField>

<ParamField path="-o" type="string" default="(derived from source)">
  Name of the generated Go file. The `.gen.go` extension is added automatically.

  **Examples:**
  ```bash
  broccoli -src public -o assets
  # Generates: assets.gen.go

  broccoli -src static -o embedFS
  # Generates: embedFS.gen.go
  ```

  **Default behavior:**
  - If not specified, uses the first source directory name
  - Automatically strips leading `../` from the path
  - Always appends `.gen.go` extension

  ```bash
  broccoli -src public
  # Generates: public.gen.go

  broccoli -src ../assets
  # Generates: assets.gen.go
  ```
</ParamField>

<ParamField path="-var" type="string" default="br">
  Name of the exported Go variable that will contain the file system.

  **Examples:**
  ```bash
  broccoli -src public -var staticFS
  # Creates: var staticFS = fs.New(...)

  broccoli -src assets -var Assets
  # Creates: var Assets = fs.New(...)
  ```

  <Warning>
  The variable name must be a valid Go identifier. It must start with a letter and contain only letters, numbers, or underscores.
  </Warning>

  **Invalid names:**
  ```bash
  broccoli -var 123files  # Error: must start with letter
  broccoli -var my-files  # Error: hyphens not allowed
  broccoli -var my files  # Error: spaces not allowed
  ```
</ParamField>

<ParamField path="-include" type="string" default="(none)">
  Wildcard pattern for files to include. Only matching files will be embedded.

  **Examples:**
  ```bash
  # Include only HTML files
  broccoli -src public -include "*.html"

  # Include multiple file types
  broccoli -src public -include "*.html,*.css,*.js"

  # Include WASM files
  broccoli -src public -include "*.wasm"
  ```

  **How it works:**
  - Patterns use standard glob matching (`*` and `?`)
  - Multiple patterns are comma-separated
  - Only files matching at least one pattern are included
  - Directories are still traversed

  <Note>
  Cannot be used together with `-exclude`. These flags are mutually exclusive.
  </Note>
</ParamField>

<ParamField path="-exclude" type="string" default="(none)">
  Wildcard pattern for files to exclude. Matching files will not be embedded.

  **Examples:**
  ```bash
  # Exclude markdown files
  broccoli -src docs -exclude "*.md"

  # Exclude multiple file types
  broccoli -src public -exclude "*.txt,*.log,*.tmp"

  # Exclude WASM files
  broccoli -src public -exclude "*.wasm"
  ```

  **How it works:**
  - Patterns use standard glob matching (`*` and `?`)
  - Multiple patterns are comma-separated
  - Files matching any pattern are excluded
  - All other files are included

  <Warning>
  Cannot be used together with `-include`. You must choose one or the other.
  </Warning>

  **Error example:**
  ```bash
  broccoli -src public -include "*.html" -exclude "*.md"
  # Error: mutually exclusive options -include and -exclude found
  ```
</ParamField>

<ParamField path="-build" type="string" default="(none)">
  Compiler build tags (constraints) for the generated file.

  **Examples:**
  ```bash
  # Linux 386 architecture only
  broccoli -src public -build "linux,386"

  # Multiple build constraints
  broccoli -src assets -build "linux,386 darwin,!cgo"

  # With go tags
  broccoli -src static -build "dev,!prod"
  ```

  **Generated output:**
  ```go
  // +build linux,386 darwin,!cgo

  // Code generated by broccoli at 2026-02-18T10:30:00Z.
  package main
  ```

  <Tip>
  Build tags are useful for:
  - Platform-specific assets
  - Development vs production builds
  - Feature flags
  - Architecture-specific resources
  </Tip>

  **Build tag syntax:**
  - Comma (`,`) means AND
  - Space means OR
  - Exclamation (`!`) means NOT

  **Example interpretations:**
  - `linux,386` = Linux AND 386 architecture
  - `linux darwin` = Linux OR Darwin
  - `!cgo` = NOT cgo
  - `linux,386 darwin,amd64` = (Linux AND 386) OR (Darwin AND amd64)
</ParamField>

<ParamField path="-opt" type="boolean" default="false">
  Enable optional (lazy) decompression. Files are decompressed only when first accessed.

  **Examples:**
  ```bash
  # Enable lazy decompression
  broccoli -src public -opt

  # Default behavior (immediate decompression)
  broccoli -src public
  ```

  **Behavior comparison:**

  <CodeGroup>
  ```go Without -opt (default)
  // All files decompressed at startup
  var br = fs.New(false, compressedData)
  // Memory usage: High initially
  // First access: Fast (already decompressed)
  ```

  ```go With -opt
  // Files decompressed on demand
  var br = fs.New(true, compressedData)
  // Memory usage: Low initially
  // First access: Slower (must decompress)
  // Subsequent access: Fast (cached)
  ```
  </CodeGroup>

  <Tip>
  Use `-opt` when:
  - Your embedded files are large
  - Not all files are accessed during runtime
  - You want to reduce startup time
  - Memory usage is a concern
  </Tip>

  <Warning>
  Without `-opt`, all files are decompressed at program startup, which may increase initialization time and memory usage.
  </Warning>
</ParamField>

<ParamField path="-gitignore" type="boolean" default="false">
  Parse and respect `.gitignore` files in each directory.

  **Examples:**
  ```bash
  # Enable gitignore parsing
  broccoli -src public -gitignore

  # Default behavior (ignore gitignore files)
  broccoli -src public
  ```

  **How it works:**
  - Broccoli searches for `.gitignore` files in the source tree
  - Files matching gitignore patterns are automatically excluded
  - Respects gitignore syntax including negation patterns

  **Example `.gitignore`:**
  ```text .gitignore
  *.log
  *.tmp
  node_modules/
  .DS_Store
  ```

  ```bash
  broccoli -src public -gitignore
  # All files matching the patterns above will be excluded
  ```

  <Note>
  This flag is useful when your source directory contains development files that shouldn't be embedded in production.
  </Note>

  <Tip>
  Combine with `-v` to see which files are being ignored:
  ```bash
  broccoli -src public -gitignore -v
  ```
  </Tip>
</ParamField>

<ParamField path="-quality" type="integer" default="11">
  Brotli compression level (1-11). Higher values produce smaller files but take longer to compress.

  **Examples:**
  ```bash
  # Fast compression (development)
  broccoli -src public -quality 1

  # Balanced compression
  broccoli -src public -quality 6

  # Maximum compression (default, production)
  broccoli -src public -quality 11
  ```

  **Compression levels:**

  | Level | Speed | Size | Use Case |
  |-------|-------|------|----------|
  | 1-3 | Fastest | Largest | Development, rapid iteration |
  | 4-6 | Fast | Medium | Testing, balanced builds |
  | 7-9 | Moderate | Small | Pre-production |
  | 10-11 | Slowest | Smallest | Production, final builds |

  <Warning>
  Invalid quality levels will result in an error:
  ```bash
  broccoli -src public -quality 15
  # Error: unsupported compression level 15 (1-11)
  ```
  </Warning>

  <Tip>
  **Recommended workflow:**
  1. Development: Use `-quality 1` for fast rebuilds
  2. CI/Testing: Use `-quality 6` for balanced builds
  3. Production: Use `-quality 11` (default) for smallest binary
  </Tip>

  **Performance example:**
  ```bash
  # Fast build (1-2 seconds)
  broccoli -src public -quality 1 -v
  # total bytes read: 1048576
  # total bytes compressed: 600000

  # Maximum compression (5-10 seconds)
  broccoli -src public -quality 11 -v
  # total bytes read: 1048576
  # total bytes compressed: 400000
  ```
</ParamField>

<ParamField path="-v" type="boolean" default="false">
  Enable verbose output. Shows detailed information during generation.

  **Example:**
  ```bash
  broccoli -src public -v
  ```

  **Output includes:**
  ```
  ignoring public/.DS_Store
  ignoring public/node_modules/package.json
  total bytes read: 1048576
  total bytes compressed: 524288
  ```

  <Note>
  Verbose mode is especially useful with `-gitignore` or `-exclude` to see which files are being filtered out.
  </Note>
</ParamField>

## Flag Combinations

### Development Build

```bash
broccoli -src public -quality 1 -v
```

Fast compression with detailed output for development.

### Production Build

```bash
broccoli -src public -o static -var staticFS -quality 11 -opt
```

Maximum compression with lazy decompression for production.

### Selective Embedding

```bash
broccoli -src assets -include "*.png,*.jpg,*.svg" -o images -var Images
```

Embed only image files.

### Platform-Specific

```bash
broccoli -src platform/linux -build "linux" -o platform
```

Embed files only for Linux builds.

### Clean Build

```bash
broccoli -src public -gitignore -exclude "*.tmp" -quality 11
```

Respect gitignore and exclude temporary files.

## Error Messages

<AccordionGroup>
  <Accordion title="Invalid Go identifier">
    ```
    broccoli: my-var is not a valid Go identifier
    ```
    **Solution:** Use a valid Go identifier for `-var` (letters, numbers, underscores only).
  </Accordion>

  <Accordion title="Mutually exclusive options">
    ```
    broccoli: mutually exclusive options -include and -exclude found
    ```
    **Solution:** Use either `-include` or `-exclude`, not both.
  </Accordion>

  <Accordion title="Unsupported compression level">
    ```
    broccoli: unsupported compression level 15 (1-11)
    ```
    **Solution:** Use a quality level between 1 and 11.
  </Accordion>

  <Accordion title="File not found">
    ```
    broccoli: file or directory assets not found
    ```
    **Solution:** Ensure the path specified in `-src` exists.
  </Accordion>

  <Accordion title="Duplicate path">
    ```
    broccoli: duplicate path in the input: public/index.html
    ```
    **Solution:** Remove duplicate paths from your `-src` argument.
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="API Reference" icon="code" href="/api/broccoli">
    Learn how to use the generated file system in your code
  </Card>
  <Card title="Guides" icon="book" href="/guides/basic-usage">
    See real-world examples of Broccoli usage
  </Card>
</CardGroup>
